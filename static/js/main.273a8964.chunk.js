(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{12:function(e,t,n){e.exports={"search-form":"UserSearch_search-form__3qIa8","form-group":"UserSearch_form-group__KfEPa"}},14:function(e,t,n){e.exports={main:"Layout_main__1xgYq"}},15:function(e,t,n){e.exports={notification:"Notification_notification__1WiPc"}},21:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(8),i=n.n(a),s=(n(21),n(14)),o=n.n(s),u=n(1),h=function(e){return Object(u.jsx)(c.Fragment,{children:Object(u.jsx)("main",{className:o.a.main,children:e.children})})},f=n(12),l=n.n(f),j=n(6),d=Object(j.b)({name:"ui",initialState:{notification:null},reducers:{showNotification:function(e,t){e.notification={message:t.payload.message}},clearNotification:function(e,t){e.notification=null}}}),m=d.actions,b=d,p=n(3),x=n(5),O=n.n(x),g=n(9),v=Object(j.b)({name:"city",initialState:{city:null,weather:null},reducers:{addCity:function(e,t){e.city=t.payload},addWeather:function(e,t){e.weather=t.payload}}}),w=v.actions,y=v,_="dGd4rEiqwfaUUsyWCj29QIVBXP6r7hAP",N=function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n){var c,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=function(){var t=Object(g.a)(O.a.mark((function t(){var c,r,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://dataservice.accuweather.com/locations/v1/cities/search?apikey=".concat(_,"&q=").concat(e,"&language=ru"));case 2:if((c=t.sent).ok){t.next=5;break}throw new Error({message:"There is a server error"});case 5:return t.next=7,c.json();case 7:return r=t.sent,n(w.addCity(r)),a=r[0].Key,console.log(r),t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var e=Object(g.a)(O.a.mark((function e(t){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=").concat(_,"&language=ru"));case 2:if((c=e.sent).ok){e.next=5;break}throw new Error({message:"There is a server error"});case 5:return e.next=7,c.json();case 7:return r=e.sent,n(w.addWeather(r)),console.log(r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c().then((function(e){return r(e)})).catch((function(e){n(m.showNotification({message:"\u041a\u043e\u043b\u044f\u043d, \u043d\u0435 \u0432\u0432\u043e\u0434\u0438 \u0444\u0438\u0433\u043d\u044e \u0432\u0441\u044f\u043a\u0443\u044e!"}))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){var t=Object(p.b)(),n=Object(c.useRef)();return Object(u.jsxs)("form",{className:l.a["search-form"],onSubmit:function(e){e.preventDefault();var c=n.current.value.trim();""===c?t(m.showNotification({message:"\u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d. \u0412\u0432\u0435\u0434\u0438\u0442\u0435  \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430."})):(t(N(c)),n.current.value="")},children:[Object(u.jsxs)("div",{className:l.a["form-group"],children:[Object(u.jsx)("label",{htmlFor:"city",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{ref:n,type:"text",id:"city"})]}),Object(u.jsx)("button",{children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u0433\u043e\u0434\u0435"})]})},W=r.a.memo(k),I=n(30),T=n(7),C=n.n(T),E=function(){var e=Object(p.c)((function(e){return e.city.weather})),t=Object(p.c)((function(e){return e.city.city}));console.log(e);var n=e[0].IsDayTime?"./images/day.svg":"./images/night.svg",c="./images/icons/".concat(e[0].WeatherIcon,".svg");return Object(u.jsxs)(I.a.div,{initial:{x:"-100vw"},animate:{x:0},className:C.a.weather,children:[Object(u.jsx)("div",{className:C.a.weatherImage,children:Object(u.jsx)("img",{src:n,alt:"day/night"})}),Object(u.jsx)("div",{className:C.a.icon,children:Object(u.jsx)("img",{src:c,alt:"weather icon"})}),Object(u.jsxs)("div",{className:C.a.weatherDesc,children:[Object(u.jsxs)("span",{children:[t[0].LocalizedName,", "]}),Object(u.jsx)("span",{children:t[0].Country.LocalizedName}),Object(u.jsx)("h3",{children:e[0].WeatherText}),Object(u.jsxs)("h3",{children:[e[0].Temperature.Metric.Value," \u0433\u0440\u0430\u0434\u0443\u0441\u043e\u0432"]})]})]})},S=n(15),D=n.n(S),F=function(e){return Object(u.jsx)(I.a.div,{initial:{y:"-100vh"},animate:{y:0},className:D.a.notification,children:Object(u.jsx)("div",{className:"message",children:e.message})})};var P=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.city.weather})),n=Object(p.c)((function(e){return e.city.city})),r=Object(p.c)((function(e){return e.ui.notification}));return Object(c.useEffect)((function(){e(N("\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"))}),[e]),Object(c.useEffect)((function(){var t=setTimeout((function(){e(m.clearNotification())}),3e3);return function(){return clearTimeout(t)}}),[e,r]),Object(u.jsxs)(h,{children:[r&&Object(u.jsx)(F,{message:r.message}),t&&n.length>0&&Object(u.jsx)(E,{}),Object(u.jsx)(W,{})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},L=Object(j.a)({reducer:{ui:b.reducer,city:y.reducer}});i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(p.a,{store:L,children:Object(u.jsx)(P,{})})}),document.getElementById("root")),q()},7:function(e,t,n){e.exports={weather:"Weather_weather__2rd2M",weatherImage:"Weather_weatherImage__1y_Rv",icon:"Weather_icon__KUuQJ",weatherDesc:"Weather_weatherDesc__3mqM7"}}},[[28,1,2]]]);
//# sourceMappingURL=main.273a8964.chunk.js.map