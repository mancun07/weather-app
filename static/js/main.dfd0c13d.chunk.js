(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{12:function(e,t,n){e.exports={"search-form":"UserSearch_search-form__3qIa8","form-group":"UserSearch_form-group__KfEPa"}},14:function(e,t,n){e.exports={main:"Layout_main__1xgYq"}},15:function(e,t,n){e.exports={notification:"Notification_notification__1WiPc"}},21:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(8),i=n.n(a),s=(n(21),n(14)),o=n.n(s),u=n(1),h=function(e){return Object(u.jsx)(r.Fragment,{children:Object(u.jsx)("main",{className:o.a.main,children:e.children})})},f=n(12),j=n.n(f),l=n(6),m=Object(l.b)({name:"ui",initialState:{notification:null},reducers:{showNotification:function(e,t){e.notification={message:t.payload.message}},clearNotification:function(e,t){e.notification=null}}}),d=m.actions,b=m,p=n(3),x=n(5),O=n.n(x),g=n(9),v=Object(l.b)({name:"city",initialState:{city:null,weather:null},reducers:{addCity:function(e,t){e.city=t.payload},addWeather:function(e,t){e.weather=t.payload}}}),w=v.actions,y=v,_="dGd4rEiqwfaUUsyWCj29QIVBXP6r7hAP",N=function(e){var t=Object(p.b)(),n=Object(r.useRef)();return Object(u.jsxs)("form",{className:j.a["search-form"],onSubmit:function(e){e.preventDefault();var r,c=n.current.value.trim();""===c?t(d.showNotification({message:"\u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d. \u0412\u0432\u0435\u0434\u0438\u0442\u0435  \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430."})):(t((r=c,function(){var e=Object(g.a)(O.a.mark((function e(t){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){var e=Object(g.a)(O.a.mark((function e(){var n,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://dataservice.accuweather.com/locations/v1/cities/search?apikey=".concat(_,"&q=").concat(r));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error({message:"There is a server error"});case 5:return e.next=7,n.json();case 7:return c=e.sent,t(w.addCity(c)),a=c[0].Key,console.log(c),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(g.a)(O.a.mark((function e(n){var r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://dataservice.accuweather.com/currentconditions/v1/".concat(n,"?apikey=").concat(_));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error({message:"There is a server error"});case 5:return e.next=7,r.json();case 7:return c=e.sent,t(w.addWeather(c)),console.log(c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n().then((function(e){return c(e)})).catch((function(e){t(d.showNotification({message:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0433\u043e\u0440\u043e\u0434\u0430"}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),n.current.value="")},children:[Object(u.jsxs)("div",{className:j.a["form-group"],children:[Object(u.jsx)("label",{htmlFor:"city",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{ref:n,type:"text",id:"city"})]}),Object(u.jsx)("button",{children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043f\u043e\u0433\u043e\u0434\u0435"})]})},k=c.a.memo(N),W=n(30),I=n(7),T=n.n(I),E=function(){var e=Object(p.c)((function(e){return e.city.weather})),t=Object(p.c)((function(e){return e.city.city}));console.log(e);var n=e[0].IsDayTime?"./images/day.svg":"./images/night.svg",r="./images/icons/".concat(e[0].WeatherIcon,".svg");return Object(u.jsxs)(W.a.div,{initial:{x:"-100vw"},animate:{x:0},className:T.a.weather,children:[Object(u.jsx)("div",{className:T.a.weatherImage,children:Object(u.jsx)("img",{src:n,alt:"day/night"})}),Object(u.jsx)("div",{className:T.a.icon,children:Object(u.jsx)("img",{src:r,alt:"weather icon"})}),Object(u.jsxs)("div",{className:T.a.weatherDesc,children:[Object(u.jsxs)("span",{children:[t[0].EnglishName,", "]}),Object(u.jsx)("span",{children:t[0].Country.EnglishName}),Object(u.jsx)("h3",{children:e[0].WeatherText}),Object(u.jsxs)("h3",{children:[e[0].Temperature.Metric.Value," \u0433\u0440\u0430\u0434\u0443\u0441\u043e\u0432"]})]})]})},C=n(15),S=n.n(C),D=function(e){return Object(u.jsx)(W.a.div,{initial:{y:"-100vh"},animate:{y:0},className:S.a.notification,children:Object(u.jsx)("div",{className:"message",children:e.message})})};var F=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.city.weather})),n=Object(p.c)((function(e){return e.city.city})),c=Object(p.c)((function(e){return e.ui.notification}));return Object(r.useEffect)((function(){var t=setTimeout((function(){e(d.clearNotification())}),3e3);return function(){return clearTimeout(t)}}),[c]),Object(u.jsxs)(h,{children:[c&&Object(u.jsx)(D,{message:c.message}),t&&n.length>0&&Object(u.jsx)(E,{}),Object(u.jsx)(k,{})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},q=Object(l.a)({reducer:{ui:b.reducer,city:y.reducer}});i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(p.a,{store:q,children:Object(u.jsx)(F,{})})}),document.getElementById("root")),P()},7:function(e,t,n){e.exports={weather:"Weather_weather__2rd2M",weatherImage:"Weather_weatherImage__1y_Rv",icon:"Weather_icon__KUuQJ",weatherDesc:"Weather_weatherDesc__3mqM7"}}},[[28,1,2]]]);
//# sourceMappingURL=main.dfd0c13d.chunk.js.map